# @package _global_
name: workflow_example_pca_autoencoder

defaults:
  - override /data: hgdp_split
  - override /callbacks/embedding: default
  - override /trainer: default
  - override /metrics: fidelity_metrics

seed: 42

# Enable fast development run mode
trainer:
  fast_dev_run: true
  limit_train_batches: 1
  limit_val_batches: 1
  limit_test_batches: 1
  max_epochs: 1

workflow:
  steps:
    - name: pca
      algorithm:
        dimensionality_reduction:
          _target_: src.algorithms.dimensionality_reduction.PCAModule
          n_components: 50
          fast_dev_run_dr: true
          n_samples_fast_dev: 100
          fit_fraction: 0.1  # Use only 10% of data for fitting
      evaluation:
        enabled: true
        metrics: ${metrics}
        
    - name: autoencoder
      algorithm:
        model:
          _target_: src.algorithms.networks.autoencoder.Autoencoder
          input_dim: 50  # Takes input from PCA step
          hidden_dims: [256, 128]
          latent_dim: 25
          activation: relu
          batchnorm: true
          dropout: 0.1
      evaluation:
        enabled: true
        metrics: ${metrics} 